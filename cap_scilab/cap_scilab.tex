%Este trabalho está licenciado sob a Licença Creative Commons Atribuição-CompartilhaIgual 3.0 Não Adaptada. Para ver uma cópia desta licença, visite http://creativecommons.org/licenses/by-sa/3.0/ ou envie uma carta para Creative Commons, PO Box 1866, Mountain View, CA 94042, USA.

%\documentclass[main.tex]{subfiles}
%\begin{document}

\chapter{Rápida Introdução ao Scilab}\label{cap:scilab}\index{Scilab}

\section{Sobre o Scilab}\index{Scilab!sobre}

Scilab é uma linguagem de programação associada com uma rica coleção de algoritmos numéricos que cobrem muitos aspectos de problemas de computação científica. Do ponto de vista de {\it software}, Scilab é uma linguagem interpretada. A linguagem Scilab permite a compilação dinâmica e lincagem com outras linguagens como Fortran e C. Do ponto de vista de licença, Scilab é um software gratuito no sentido que o usuário não paga por ele. Além disso, Scilab é um software de código aberto disponível sobre a licença Cecill \cite{Cecill}. Scilab esta disponível para Linux, Mac Os e Windows. Ajuda {\it online} esta disponível em português e muitas outras línguas. Do ponto de vista científico, Scilab começou focado em soluções computacionais para problemas de álgebra linear, mas, rapidamente, o número de aplicações se estendeu para muitas áreas da computação científica.

As informações deste apêndice foram adaptadas do tutorial ``Introduction to Scilab'' \cite{Scilab15}, veja-o para maiores informações. Além disso, recomendamos visitar o sítio oficial do Scilab:
\begin{center}
  \url{http://www.scilab.org/}
\end{center}

O manual oficial do Scilab em português pode ser obtido em:
\begin{center}
  \url{http://help.scilab.org/docs/5.5.2/pt_BR/index.html}
\end{center}

\subsection{Instalação e Execução}\index{Scilab!instalação e execução}

O Scilab pode ser executado normalmente nos sistemas operacionais Linux, Mac Os e Windows. Muitas distribuições de Linux (Linux Mint, Ubuntu, etc.) têm o Scilab no seu sistema de pacotes (incluindo binário e documentação em várias línguas). Alternativamente, no \href{www.scilab.org}{sítio de internet oficial do Scilab} pode-se obter mais versões de binários e documentação para instalação em sistemas Linux. Para a instalação em sistemas Mac Os e Windows, visite \href{www.scilab.org}{sítio de internet oficial do Scilab}.

\subsection{Usando o Scilab}\index{Scilab!usando}

O uso do Scilab pode ser feito de três formas básicas:
\begin{itemize}
\item usando o {\bf console} de modo iterativo;
\item usando a função \verb+exec+ para executar um código Scilab digitado em um arquivo externo;
\item usando processamento {\it bash}.
\end{itemize}

\begin{ex}
  Considere o seguinte pseudocódigo:
\begin{verbatim}
s = "Olá Mundo!". (Sem imprimir na tela o resultado.)
saída(s). (Imprime na tela.)
\end{verbatim}
Implemente este pseudocódigo no Scilab: a) usando somente o console do Scilab; b) usando o editor do Scilab e executando o código com a função \verb+exec+; c) usando processamento {\it bash}.
\end{ex}
\begin{sol} Seguem as soluções de cada item:
  \begin{itemize}
  \item[a)]  No console temos:
\begin{verbatim}
-->s = "Olá Mundo!";
-->disp(s)
\end{verbatim}
  \item[b)] Para abrir o editor do Scilab pode-se digitar no \verb+prompt+:
\begin{verbatim}
-->editor()
\end{verbatim}
ou, alternativamente:
\begin{verbatim}
-->scinotes
\end{verbatim}
Então, digita-se no editor o código:
\begin{verbatim}
s = "Olá Mundo!"
disp(s)
\end{verbatim}
salva-se em um arquivo de sua preferência (por exemplo, \verb+~/foo.sce+) e executa-se o código clicando no botão ``{\it play}'' disponível na barra de botões do Scinotes.
\item[c)] Para executar o código em processamento {\it bash}, digita-se em um editor o código:
\begin{verbatim}
s = "Olá Mundo!"
disp(s)
\end{verbatim}
salva-se em um arquivo de sua preferência (por exemplo, \verb+~/foo.sce+) e executa-se em um console do sistema usando a linha de comando:
\begin{verbatim}
$ scilab -nw -f ~/foo.sce
\end{verbatim}
Digite, então, \verb+quit+ para voltar ao prompt do sistema.
\end{itemize}
\end{sol}

\section{Elementos da linguagem}\index{Scilab!elementos da linguagem}

Scilab é uma linguagem interpretada em que todas as variáveis são matrizes. Uma variável é criada quando um valor é atribuído a ela. Por exemplo:
\begin{verbatim}
-->x=1
 x  =
    1.  
-->y = x * 2
 y  =
    2.  
\end{verbatim}
a variável \verb+x+ recebe o valor \verb+double+ $1$ e, logo após, na segunda linha de comando, a variável \verb+y+ recebe o valor \verb+double+ $2$. Observamos que o símbolo \verb+=+ significa o operador de atribuição não o de igualdade. O operador lógico de igualdade no Scilab é \verb+==+.

Comentários e continuação de linha de comando são usados como no seguinte exemplo:
\begin{verbatim}
-->//Isto é um comentário
-->x = 1 ..
-->+ 2
 x  =
    3.  
\end{verbatim}

\subsection{Operações matemáticas elementares}\index{Scilab!operações matemáticas}

No Scilab, os operadores matemáticos elementares são os seguintes:
\begin{verbatim}
  + adição
  - subtração
  * multiplicação
  / divisão
  ^ potenciação (igual a **)
  ' transposto conjugado
\end{verbatim}

\subsection{Funções e constantes elementares}\index{Scilab!funções e constantes}

Várias funções e constantes elementares já estão pré-definidas no Scilab. Por exemplo:
\begin{verbatim}
-->cos(%pi) //cosseno de pi
 ans  =
  - 1.  
 
-->exp(1) == %e //número de Euler
 ans  =
  T  
 
-->log(1) //logarítmo natual de 1
 ans  =
    0.  
\end{verbatim}
Para mais informações sobre quais as funções e constantes pré-definidas no Scilab, consulte o manual, seções ``Funções elementares'' e o carácter especial ``\%".

\subsection{Operadores lógicos}\index{Scilab!operadores lógicos}

No Scilab, o valor lógico verdadeiro é escrito como \verb+%T+ e o valor lógico falso como \verb+%F+. Temos os seguintes operadores lógicos disponíveis:
\begin{verbatim}
&  e lógico
|  ou lógico
~  negação
== igualdade
~= diferente
<  menor que
>  maior que
<= menor ou igual que
>= maior ou igual que
\end{verbatim}

\begin{ex}
  Se $x=2$, então $x$ é maior ou igual a 1 e menor que 3? 
\end{ex}
\begin{sol}
  No Scilab, temos:
\begin{verbatim}
-->x=2;
 
-->(x >= 1) & (x < 3)
 ans  =
 
  T  
\end{verbatim}
\end{sol}

\section{Matrizes}\index{Scilab!matrizes}

No Scilab, matriz é o tipo básico de dados, a qual é definida por seu número de linhas, colunas e tipo de dado (real, inteiro, lógico, etc.). Uma matriz $A = [a_{i,j}]_{i,j=1}^{m,n}$ no Scilab é definida usando-se a seguinte sintaxe:
\begin{verbatim}
A = [ a11 , a12 , ... , a1n ; ...; am1 , am2 , ... , amn ]
\end{verbatim}

\begin{ex}
  Defina a matriz:
  \begin{equation*}
    A = \left[
      \begin{array}{ccc}
        1 & 2 & 3\\
        4 & 5 & 6
      \end{array}
\right]
  \end{equation*}
\end{ex}
\begin{sol}
  No Scilab, digitamos:
\begin{verbatim}
-->A = [1 , 2 , 3 ; 4 , 5 , 6]
 A  =
 
    1.    2.    3.  
    4.    5.    6.  
\end{verbatim}
\end{sol}

A seguinte lista contém uma série de funções que geram matrizes particulares:
\begin{verbatim}
eye      matrix identidade
linspace vetor de elementos linearmente espaçados
ones     matriz cheia de uns
zeros    matriz nula
\end{verbatim}

\subsection{O operador ``:''}\index{Scilab!operador :}

O operador ``:'' cria um vetor linha de elementos. A sintaxe:
\begin{verbatim}
v = i:s:j
\end{verbatim}
cria um vetor linha:
\begin{equation*}
  v = [i,~i+s,~i+2s,\dotsc, i+ns]
\end{equation*}
onde $n$ é o maior inteiro tal que $i + ns < j$.

\begin{ex}
Veja as seguintes linhas de comando:
\begin{verbatim}
-->v = 10:-2:3
 v  =
 
    10.    8.    6.    4.  
 
-->u = 2:6
 u  =
    2.    3.    4.    5.    6.
\end{verbatim}
\end{ex}

\subsection{Obtendo dados de uma matriz}

A função \verb+size+ retorna o tamanho de uma matriz, por exemplo:
\begin{verbatim}
-->A = ones(3,2)
 A  =
 
    1.    1.  
    1.    1.  
    1.    1.  
 
-->[nl, nc] = size(A)
 nc  =
 
    2.  
 nl  =
 
    3.  
\end{verbatim}
informando que a matriz \verb+A+ tem três linhas e duas colunas.

Existem vários métodos para se acessar os elementos de uma matriz dada \verb+A+:
\begin{itemize}
\item a matriz inteira acessa-se com a sintaxe:
\begin{verbatim}
A
\end{verbatim}
\item o elemento da $i$-ésima linha e $j$-ésima coluna acessa-se usando a sintaxe:
\begin{verbatim}
A(i,j)
\end{verbatim}
\item o bloco formado pelas linhas $i_1$, $i_2$ e pelas colunas $j_1$, $j_2$ obtém-se usando a sintaxe:
\begin{verbatim}
A(i1:i2, j1:j2)
\end{verbatim}
\end{itemize}

\begin{ex}
  Veja as seguintes linhas de comando:
\begin{verbatim}
-->A = rand(3,4) //gera uma matriz randômica
 A  =
 
    0.2113249    0.3303271    0.8497452    0.0683740  
    0.7560439    0.6653811    0.6857310    0.5608486  
    0.0002211    0.6283918    0.8782165    0.6623569  
 
-->A //mostra toda a matriz A
 ans  =
 
    0.2113249    0.3303271    0.8497452    0.0683740  
    0.7560439    0.6653811    0.6857310    0.5608486  
    0.0002211    0.6283918    0.8782165    0.6623569  
 
-->A(2,3) //acessa o elemento a23
 ans  =
 
    0.6857310  
 
-->A(2:3,2:4) //acessa um bloco de A
 ans  =
 
    0.6653811    0.6857310    0.5608486  
    0.6283918    0.8782165    0.6623569  
\end{verbatim}
\end{ex}

Definida uma matriz $A$ no Scilab, as seguintes sintaxes são bastante úteis:
\begin{verbatim}
A(:,:)   toda a matriz
A(i:j,k) os elementos das linhas i até j (inclusive) da k-ésima coluna
A(i,j:k) os elementos da i-ésina linha das colunas j até k (inclusive)
A(i,:)   a i-ésima linha da matriz
A(:,j)   a j-ésima coluna da matriz
A(i,$)   o elemento da i-ésima linha e da última coluna
A($,j)   o elemento da última linha e da j-ésima coluna
\end{verbatim}

\begin{ex}
Veja as seguintes linhas de comando:
\begin{verbatim}
-->B = rand(4,4)
 B  =
 
    0.2113249    0.6653811    0.8782165    0.7263507  
    0.7560439    0.6283918    0.0683740    0.1985144  
    0.0002211    0.8497452    0.5608486    0.5442573  
    0.3303271    0.6857310    0.6623569    0.2320748  
 
-->aux = B(:,2); B(:,2) = B(:,3); B(:,3) = aux
 B  =
 
    0.2113249    0.8782165    0.6653811    0.7263507  
    0.7560439    0.0683740    0.6283918    0.1985144  
    0.0002211    0.5608486    0.8497452    0.5442573  
    0.3303271    0.6623569    0.6857310    0.2320748  
\end{verbatim}
\end{ex}

\subsection{Operações matriciais e elemento-a-elemento}

As operações matriciais elementares seguem a mesma sintaxe que as operações elementares de números. Agora, no Scilab, também podemos fazer operações elemento-a-elemento colocando um ponto ``.'' antes da operação desejada.

Aqui, temos as sintaxes análogas entre operações matriciais e operações elemento-a-elemento:
\begin{verbatim}
+ adição               .+ adição elemento-a-elemento
- subtração            .- subtração elemento-a-elemento
* multiplicação        .* multiplicação elemento-a-elemento
                       ./ divisão elemento-a-elemento
^ potenciação          .^ potenciação elemento-a-elemento
' transposta conjugada .' transposta (não conjugada)
\end{verbatim}

\begin{ex}
  Veja as seguintes linhas de comando:
\begin{verbatim}
-->A = ones (2 ,2)
 A  =
 
    1.    1.  
    1.    1.  
 
-->B = 2 * ones (2 ,2)
 B  =
 
    2.    2.  
    2.    2.  
 
-->A * B
 ans  =
 
    4.    4.  
    4.    4.  
 
-->A .* B
 ans  =
 
    2.    2.  
    2.    2.  
\end{verbatim}
\end{ex}

\section{Estruturas de ramificação e repetição}\index{Scilab!ramificação e repetição}

O Scilab contém estruturas de repetição e ramificação padrões de linguagens estruturadas.

\subsection{A instrução de ramificação ``if''}

A instrução ``if'' permite executar um pedaço do código somente se uma dada condição for satisfeita.

\begin{ex}
  Veja o seguinte código Scilab:
\begin{verbatim}
i = 2
if ( i == 1 ) then
    disp ( " Hello ! " )
elseif ( i == 2 ) then
    disp ( " Goodbye ! " )
elseif ( i == 3 ) then
    disp ( " Tchau ! " )
else
    disp ( " Au Revoir ! " )
end
\end{verbatim}
Qual é a saída apresentada no console do Scilab? Porquê?
\end{ex}

\subsection{A instrução de repetição ``for''}

A instrução \verb+for+ permite que um pedaço de código seja executado repetidamente.

\begin{ex}
  Veja o seguinte código:
\begin{verbatim}
for i = 1:5
    disp(i)
end
\end{verbatim}
O que é mostrado no console do Scilab?
\end{ex}

\begin{ex}
  Veja o seguinte código:
\begin{verbatim}
for j = 1:2:8
    disp(j)
end
\end{verbatim}
O que é mostrado no console do Scilab?
\end{ex}

\begin{ex}
  Veja o seguinte código:
\begin{verbatim}
for k = 10:-3:1
    disp(k)
end
\end{verbatim}
O que é mostrado no console do Scilab?
\end{ex}

\begin{ex}
  Veja o seguinte código:
\begin{verbatim}
for i = 1:3
    for j = 1:3
        disp([i,j])
    end
end
\end{verbatim}
O que é mostrado no console do Scilab?
\end{ex}

\subsection{A instrução de repetição ``while''}

A instrução \verb+while+ permite que um pedaço de código seja executado repetidamente até que uma dada condição seja satisfeita.

\begin{ex}
Veja o seguinte código Scilab:
\begin{verbatim}
s = 0
i = 1
while ( i <= 10 )
   s = s + i
   i = i + 1
end
\end{verbatim}
Qual é o valor de \verb+s+ ao final da execução? Porquê?
\end{ex}

\section{Funções}\index{Scilab!funções}

Além das muitas funções já pré-definidas no Scilab, podemos definir nossas próprias funções. Para tanto, existem duas instruções no Scilab:
\begin{itemize}
\item \verb+deff+
\item \verb+function+
\end{itemize}

A instrução \verb+deff+ é apropriada para definirmos funções com poucas computações. Quando a função exige um grande quantidade de código para ser definida, a melhor opção é usar a instrução \verb+function+. Veja os seguintes exemplos:

\begin{ex}
  O seguinte código:
\begin{verbatim}
-->deff('y = f(x)', 'y = x + sin(x)')
\end{verbatim}
define, no Scilab, a função $f(x) = x + \sen x$.

Observe que $f(\pi) = \pi$. Confirme isso computando:
\begin{verbatim}
-->f(%pi)
\end{verbatim}
no Scilab.

Alternativamente, definimos a mesma função com o código:
\begin{verbatim}
function [y] = f(x)
   y = x + sin(x)
endfunction
\end{verbatim}
Verifique!
\end{ex}

\begin{ex}
  O seguinte código Scilab:
\begin{verbatim}
function [z] = h(x,y)
   if (x < y) then
      z = y - x
   else
      z = x - y
   end
endfunction
\end{verbatim}
define a função:
\begin{equation*}
  h(x,y) = \left\{
    \begin{array}{ll}
      y - x &, x < y\\
      x - y &, x \geq y
    \end{array}
\right.
\end{equation*}
\end{ex}

\begin{ex}
  O seguinte código:
\begin{verbatim}
function [y] = J(x)
   y(1,1) = 2*x(1)
   y(1,2) = 2*x(2)

   y(2,1) = -x(2)*sin(x(1)*x(2))
   y(2,2) = -x(1)*sin(x(1)*x(2))
endfunction
\end{verbatim}
define a matriz jacobiana $J(x_1,x_2) := \frac{\p(f_1,f_2)}{\p(x_1,x_2)}$ da função:
\begin{equation*}
  \pmb{f}(x_1,x_2) = (x_1^2 + x_2^2,~\cos(x_1x_2)).
\end{equation*}
\end{ex}

\section{Gráficos}\index{Scilab!gráficos}

Para criar um esboço do gráfico de uma função de uma variável real $y = f(x)$, podemos usar a função \verb+plot+. Esta função faz uma representação gráfica de pontos $(x_i, y_i)$ fornecidos. O Scilab oferece uma série de opções para esta função de forma que o usuário pode ajustar várias questões de visualização. Consulte sobre a função \verb+plot+ no \href{http://help.scilab.org/docs/5.5.2/pt_BR/index.html}{manual do Scilab}.

\begin{ex}
  Veja as seguintes linhas de código:
\begin{verbatim}
-->deff('y = f(x)','y = x .^ 3 + 1')
-->x = linspace(-2, 2, 100);
-->plot(x, f(x)); xgrid
\end{verbatim}
\end{ex}

%\end{document}